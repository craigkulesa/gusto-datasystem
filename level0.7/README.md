# Level 0.7 Quick Start 
## tl;dr version for the impatient
1. Ensure that you have python-influxdb, python-configargparse, python-astropy  installed
2. Ensure you have already installed and configured influxdb for the level 0.5 processor, as it is also required for level 0.7.  See the Quick Start for Level 0.5 for instructions. 
3. Edit a L07-config file for the paths suitable for your system.  See the example in ./common/L07-config, copy and edit to suit.
4. Ensure the calibration data products [IF.txt](http://soral.as.arizona.edu/GUSTO/calibration/IF.txt), [dataLog.txt](http://soral.as.arizona.edu/GUSTO/calibration/dataLog.txt) and optionally [sequences.txt](http://soral.as.arizona.edu/GUSTO/calibration/sequences.txt) are in your input data folder pointed to by "inpath".  The sequences.txt file will be generated by the processor if it is not found.   Also untar the [udp.tar.gz](http://soral.as.arizona.edu/GUSTO/calibration/udp.tar.gz) file in this folder.  

5. You're done!  Run the processor on some _current_ level 0.5 data (contemporary with this commit).  If you have everything set up in a config file, you can just run it from the level0.7/src directory without any arguments:

          time ./L07-pipeline.py
or you can override any of the configuration variables with command line arguments:
          
    time ./L07-pipeline.py -e -b 1 -j 2 -s 9520 9530 

          Namespace(config=None, erase=True, cpus='2', band=['1'], path='/home/obs/data/GUSTO/', scanid=['9520', '9530'])          
          Command Line Args:   -e -b 1 -j 2 -s 9520 9530
          Config File (./L07-config):
            path:              /home/obs/data/GUSTO/

          Sequences file seemingly exists, skipping step...
          Reusing directory /home/obs/data/GUSTO/level0.7/
          Erasing contents of /home/obs/data/GUSTO/level0.7/
          Processing Band 1 sequence 03237 from 09520 - 09522
          Processing Band 1 sequence 03238 from 09522 - 09524
          Sequence flag is 0
          Sequence flag is 8
          Processing Band 1 sequence 03239 from 09524 - 09526
          Processing Band 1 sequence 03240 from 09526 - 09528
          Sequence flag is 16
          Sequence flag is 0
          Processing Band 1 sequence 03241 from 09528 - 09530
          Processing Band 1 sequence 03242 from 09530 - 09532
          Sequence flag is 8
          Sequence flag is 0

          real    0m2.775s
          user    0m1.746s
          sys     0m1.514s


where the arguments are:

       -e will erase the contents of any reused destination folders before starting
       -j specifies the number of CPUs to use (without it, python will best-guess)
       -b will either process B1 or B2 data, depending on whether you specify 1 or 2
       -s sets the scanID range for the processing
       -p sets the data path (which should contain the calibration files, level0.5 input data folders, udp, and output level 0.7 folder)

## Notes for current version ##
- If you are using the influx database from DR1 Rev A or earlier, please download and install the new version (reduced size = 260 MB) with interpolated calibration load THOT values when they are missing: [see link to calibration folder](http://soral.as.arizona.edu/GUSTO/calibration/) and look at the instructions for installing it from the Level 0.5 pipeline readme.
- Finally, either delete any old sequences.txt file for the L07 pipeline to regenerate, or download a new sequences.txt from the calibration folder, above
  
